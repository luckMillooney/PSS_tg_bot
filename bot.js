const { Telegraf, Markup } = require('telegraf')
const { message } = require('telegraf/filters')
const dotenv = require('dotenv');
dotenv.config();

const bot = new Telegraf(process.env.BOT_TOKEN)
let a = 0

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
const welcomeMessage = (ctx) => {
    const name = ctx.message.chat.first_name; // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¸Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
    ctx.replyWithMarkdown(`ðŸ‘‹ ÐŸÑ€Ð¸Ð²ÐµÑ‚, *${name}*!\n\nÐ­Ñ‚Ð¾Ñ‚ Ð±Ð¾Ñ‚ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ñ‚ÐµÐ±Ðµ:\n*Ð£Ð·Ð½Ð°Ñ‚ÑŒ* Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹.\n*Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ* Ð½Ð° Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÑŽÑ‰Ð¸Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ.\n*Ð¡Ð²ÑÐ·Ð°Ñ‚ÑŒÑÑ* Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸ÐµÐ¹ ÐŸÑ€ÐµÐ·Ð¸Ð´ÐµÐ½Ñ‚Ð° ÑˆÐºÐ¾Ð»Ñ‹.`);
  };


const menu = (ctx) => {
ctx.reply(
    'ðŸ“‹ Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¸Ð· Ð¼ÐµÐ½ÑŽ:',
    Markup.inlineKeyboard([
    [Markup.button.callback('ðŸ“… Ð£Ð·Ð½Ð°Ñ‚ÑŒ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¹', 'schedule')],
    [Markup.button.callback('ðŸ“ Ð—Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ', 'register')],
    [Markup.button.callback('âœ‰ï¸ ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð»Ð¸ Ð¶Ð°Ð»Ð¾Ð±Ñƒ', 'feedback')],
    [Markup.button.callback('ðŸ† ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð±Ð°Ð»Ð»Ñ‹ "Ð›ÑƒÑ‡ÑˆÐ¸Ð¹ ÐšÐ»Ð°ÑÑ"', 'scores')],
    ])
);
};
  
// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ /start
bot.start((ctx) => {
    welcomeMessage(ctx);
});

bot.command('menu', (ctx) => {
    menu(ctx);
});

bot.action('schedule', (ctx) => {
    ctx.reply('ðŸ“… Ð’Ð¾Ñ‚ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ñ… Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¹:\n\n(Ñ‚ÑƒÑ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð· Ð±Ð´(Ð±Ð´ Ð½Ðµ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð´Ð¾ Ð´ÐµÐ¿Ð»Ð¾Ñ!!!))');
});

bot.action('register', (ctx) => {
    ctx.reply('ðŸ“ Ð§Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð½Ð° Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ... (Ñ‚ÑƒÑ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð²Ñ‹Ð±Ð¾Ñ€ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ, Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð»Ð¸Ð´ÐµÑ€/ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸Ðº Ð¸ Ð´Ð°Ð»ÐµÐµ Ð¾Ñ‚ ÑÑ‚Ð¾Ð³Ð¾)');
});

bot.action('feedback', (ctx) => {
    ctx.reply('âœ‰ï¸ ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð»Ð¸ Ð¶Ð°Ð»Ð¾Ð±Ñƒ, Ð¸ Ð¼Ñ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.');
});

bot.action('scores', (ctx) => {
    ctx.reply('ðŸ† Ð¢ÐµÐºÑƒÑ‰Ð¸Ðµ Ð±Ð°Ð»Ð»Ñ‹ Ð¿Ð¾ ÐºÐ¾Ð½ÐºÑƒÑ€ÑÑƒ "Ð›ÑƒÑ‡ÑˆÐ¸Ð¹ ÐšÐ»Ð°ÑÑ":\n\n(Ñ‚ÑƒÑ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð· Ð±Ð´(Ð±Ð´ Ð½Ðµ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð´Ð¾ Ð´ÐµÐ¿Ð»Ð¾Ñ!!!))');
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ "ÑÑ‚Ð°Ñ€Ñ‚", "Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ", "Ð¼ÐµÐ½ÑŽ"
bot.hears(['ÑÑ‚Ð°Ñ€Ñ‚', 'Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ'], (ctx) => {
    welcomeMessage(ctx);
});

bot.hears(['Ð¼ÐµÐ½ÑŽ'], (ctx) => {
    menu(ctx);
});

bot.on(message('sticker'), (ctx) => menu(ctx))
bot.hears('hi', (ctx) => ctx.reply('Hey there'))
bot.launch()

// Enable graceful stop
process.once('SIGINT', () => bot.stop('SIGINT'))
process.once('SIGTERM', () => bot.stop('SIGTERM'))
